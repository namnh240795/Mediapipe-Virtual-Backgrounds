const tn=function(){const N=document.createElement("link").relList;if(N&&N.supports&&N.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))Q(T);new MutationObserver(T=>{for(const _ of T)if(_.type==="childList")for(const Z of _.addedNodes)Z.tagName==="LINK"&&Z.rel==="modulepreload"&&Q(Z)}).observe(document,{childList:!0,subtree:!0});function B(T){const _={};return T.integrity&&(_.integrity=T.integrity),T.referrerpolicy&&(_.referrerPolicy=T.referrerpolicy),T.crossorigin==="use-credentials"?_.credentials="include":T.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function Q(T){if(T.ep)return;T.ep=!0;const _=B(T);fetch(T.href,_)}};tn();var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},en={};(function(){var y;function N(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var B=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function Q(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lt=="object"&&Lt];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var T=Q(this);function _(t,e){if(e)t:{var n=T;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];if(!(i in n))break t;n=n[i]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&e!=null&&B(n,t,{configurable:!0,writable:!0,value:e})}}_("Symbol",function(t){function e(u){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(r+(u||"")+"_"+i++,u)}function n(u,o){this.g=u,B(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),_("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var r=T[e[n]];typeof r=="function"&&typeof r.prototype[t]!="function"&&B(r.prototype,t,{configurable:!0,writable:!0,value:function(){return Z(N(this))}})}return t});function Z(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function U(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:N(t)}}function ft(t){if(!(t instanceof Array)){t=U(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var me=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},bt;if(typeof Object.setPrototypeOf=="function")bt=Object.setPrototypeOf;else{var jt;t:{var we={a:!0},Dt={};try{Dt.__proto__=we,jt=Dt.a;break t}catch{}jt=!1}bt=jt?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ht=bt;function rt(t,e){if(t.prototype=me(e.prototype),t.prototype.constructor=t,ht)ht(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.ea=e.prototype}function At(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Ot(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}At.prototype.o=function(t){this.h=t};function St(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}At.prototype.return=function(t){this.j={return:t},this.g=this.s};function M(t,e,n){return t.g=n,{value:e}}function be(t){this.g=new At,this.h=t}function je(t,e){Ot(t.g);var n=t.g.i;return n?kt(t,"return"in n?n.return:function(r){return{value:r,done:!0}},e,t.g.return):(t.g.return(e),it(t))}function kt(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var u=i.value}catch(o){return t.g.i=null,St(t.g,o),it(t)}return t.g.i=null,r.call(t.g,u),it(t)}function it(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(n){t.g.h=void 0,St(t.g,n)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function Ae(t){this.next=function(e){return Ot(t.g),t.g.i?e=kt(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=it(t)),e},this.throw=function(e){return Ot(t.g),t.g.i?e=kt(t,t.g.i.throw,e,t.g.o):(St(t.g,e),e=it(t)),e},this.return=function(e){return je(t,e)},this[Symbol.iterator]=function(){return this}}function C(t,e){return e=new Ae(new be(e)),ht&&t.prototype&&ht(e,t.prototype),e}function Oe(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var u=n++;return{value:e(u,t[u]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}var Se=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};_("Object.assign",function(t){return t||Se}),_("Promise",function(t){function e(o){this.h=0,this.i=void 0,this.g=[],this.o=!1;var s=this.j();try{o(s.resolve,s.reject)}catch(a){s.reject(a)}}function n(){this.g=null}function r(o){return o instanceof e?o:new e(function(s){s(o)})}if(t)return t;n.prototype.h=function(o){if(this.g==null){this.g=[];var s=this;this.i(function(){s.l()})}this.g.push(o)};var i=T.setTimeout;n.prototype.i=function(o){i(o,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var o=this.g;this.g=[];for(var s=0;s<o.length;++s){var a=o[s];o[s]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(o){this.i(function(){throw o})},e.prototype.j=function(){function o(l){return function(h){a||(a=!0,l.call(s,h))}}var s=this,a=!1;return{resolve:o(this.C),reject:o(this.l)}},e.prototype.C=function(o){if(o===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.F(o);else{t:switch(typeof o){case"object":var s=o!=null;break t;case"function":s=!0;break t;default:s=!1}s?this.u(o):this.m(o)}},e.prototype.u=function(o){var s=void 0;try{s=o.then}catch(a){this.l(a);return}typeof s=="function"?this.G(s,o):this.m(o)},e.prototype.l=function(o){this.s(2,o)},e.prototype.m=function(o){this.s(1,o)},e.prototype.s=function(o,s){if(this.h!=0)throw Error("Cannot settle("+o+", "+s+"): Promise already settled in state"+this.h);this.h=o,this.i=s,this.h===2&&this.D(),this.A()},e.prototype.D=function(){var o=this;i(function(){if(o.B()){var s=T.console;typeof s<"u"&&s.error(o.i)}},1)},e.prototype.B=function(){if(this.o)return!1;var o=T.CustomEvent,s=T.Event,a=T.dispatchEvent;return typeof a>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof s=="function"?o=new s("unhandledrejection",{cancelable:!0}):(o=T.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.i,a(o))},e.prototype.A=function(){if(this.g!=null){for(var o=0;o<this.g.length;++o)u.h(this.g[o]);this.g=null}};var u=new n;return e.prototype.F=function(o){var s=this.j();o.J(s.resolve,s.reject)},e.prototype.G=function(o,s){var a=this.j();try{o.call(s,a.resolve,a.reject)}catch(l){a.reject(l)}},e.prototype.then=function(o,s){function a(w,d){return typeof w=="function"?function(c){try{l(w(c))}catch(g){h(g)}}:d}var l,h,k=new e(function(w,d){l=w,h=d});return this.J(a(o,l),a(s,h)),k},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.J=function(o,s){function a(){switch(l.h){case 1:o(l.i);break;case 2:s(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?u.h(a):this.g.push(a),this.o=!0},e.resolve=r,e.reject=function(o){return new e(function(s,a){a(o)})},e.race=function(o){return new e(function(s,a){for(var l=U(o),h=l.next();!h.done;h=l.next())r(h.value).J(s,a)})},e.all=function(o){var s=U(o),a=s.next();return a.done?r([]):new e(function(l,h){function k(c){return function(g){w[c]=g,d--,d==0&&l(w)}}var w=[],d=0;do w.push(void 0),d++,r(a.value).J(k(w.length-1),h),a=s.next();while(!a.done)})},e}),_("Object.is",function(t){return t||function(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}}),_("Array.prototype.includes",function(t){return t||function(e,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,0>n&&(n=Math.max(n+i,0));n<i;n++){var u=r[n];if(u===e||Object.is(u,e))return!0}return!1}}),_("String.prototype.includes",function(t){return t||function(e,n){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,n||0)!==-1}}),_("Array.prototype.keys",function(t){return t||function(){return Oe(this,function(e){return e})}});var ke=this||self;function gt(t,e){t=t.split(".");var n=ke;t[0]in n||typeof n.execScript>"u"||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||e===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=e}function Bt(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var Vt,xe=typeof TextDecoder<"u",Wt,Te=typeof TextEncoder<"u";function Ht(t){if(Te)t=(Wt||(Wt=new TextEncoder)).encode(t);else{var e=void 0;e=e===void 0?!1:e;for(var n=0,r=new Uint8Array(3*t.length),i=0;i<t.length;i++){var u=t.charCodeAt(i);if(128>u)r[n++]=u;else{if(2048>u)r[n++]=u>>6|192;else{if(55296<=u&&57343>=u){if(56319>=u&&i<t.length){var o=t.charCodeAt(++i);if(56320<=o&&57343>=o){u=1024*(u-55296)+o-56320+65536,r[n++]=u>>18|240,r[n++]=u>>12&63|128,r[n++]=u>>6&63|128,r[n++]=u&63|128;continue}else i--}if(e)throw Error("Found an unpaired surrogate");u=65533}r[n++]=u>>12|224,r[n++]=u>>6&63|128}r[n++]=u&63|128}}t=r.subarray(0,n)}return t}var qt={},ot=null;function Ee(t,e){e===void 0&&(e=0),Xt(),e=qt[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,u=0;i<t.length-2;i+=3){var o=t[i],s=t[i+1],a=t[i+2],l=e[o>>2];o=e[(o&3)<<4|s>>4],s=e[(s&15)<<2|a>>6],a=e[a&63],n[u++]=l+o+s+a}switch(l=0,a=r,t.length-i){case 2:l=t[i+1],a=e[(l&15)<<2]||r;case 1:t=t[i],n[u]=e[t>>2]+e[(t&3)<<4|l>>4]+a+r}return n.join("")}function _e(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);var r=new Uint8Array(n),i=0;return Re(t,function(u){r[i++]=u}),r.subarray(0,i)}function Re(t,e){function n(a){for(;r<t.length;){var l=t.charAt(r++),h=ot[l];if(h!=null)return h;if(!/^[\s\xa0]*$/.test(l))throw Error("Unknown base64 encoding at char: "+l)}return a}Xt();for(var r=0;;){var i=n(-1),u=n(0),o=n(64),s=n(64);if(s===64&&i===-1)break;e(i<<2|u>>4),o!=64&&(e(u<<4&240|o>>2),s!=64&&e(o<<6&192|s))}}function Xt(){if(!ot){ot={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));qt[n]=r;for(var i=0;i<r.length;i++){var u=r[i];ot[u]===void 0&&(ot[u]=i)}}}}var Pe=typeof Uint8Array.prototype.slice=="function",$t;function Yt(t,e,n){return e===n?$t||($t=new Uint8Array(0)):Pe?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var Y=0,J=0;function Jt(t,e){e=e===void 0?{}:e,e=e.v===void 0?!1:e.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=e,t&&Gt(this,t)}function Gt(t,e){e=e.constructor===Uint8Array?e:e.constructor===ArrayBuffer?new Uint8Array(e):e.constructor===Array?new Uint8Array(e):e.constructor===String?_e(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t.h=e,t.j=0,t.i=t.h.length,t.g=t.j}Jt.prototype.reset=function(){this.g=this.j};function st(t){var e=t.h,n=e[t.g],r=n&127;return 128>n?(t.g+=1,r):(n=e[t.g+1],r|=(n&127)<<7,128>n?(t.g+=2,r):(n=e[t.g+2],r|=(n&127)<<14,128>n?(t.g+=3,r):(n=e[t.g+3],r|=(n&127)<<21,128>n?(t.g+=4,r):(n=e[t.g+4],r|=(n&15)<<28,128>n?(t.g+=5,r>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&t.g++,r)))))}function H(t){var e=t.h[t.g],n=t.h[t.g+1],r=t.h[t.g+2],i=t.h[t.g+3];return t.g+=4,n=(e<<0|n<<8|r<<16|i<<24)>>>0,t=2*(n>>31)+1,e=n>>>23&255,n&=8388607,e==255?n?NaN:1/0*t:e==0?t*Math.pow(2,-149)*n:t*Math.pow(2,e-150)*(n+Math.pow(2,23))}var Qt=[];function dt(){this.g=new Uint8Array(64),this.h=0}dt.prototype.push=function(t){if(!(this.h+1<this.g.length)){var e=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(e)}this.g[this.h++]=t},dt.prototype.length=function(){return this.h},dt.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,Yt(t,0,e)};function G(t,e){for(;127<e;)t.push(e&127|128),e>>>=7;t.push(e)}function pt(t){var e={},n=e.N===void 0?!1:e.N;this.o={v:e.v===void 0?!1:e.v},this.N=n,e=this.o,Qt.length?(n=Qt.pop(),e&&(n.v=e.v),t&&Gt(n,t),t=n):t=new Jt(t,e),this.g=t,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}pt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function K(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=t.g,e=e.l||0>e.g||e.g>e.i),e)return!1;t.m=t.g.g,e=st(t.g);var n=e&7;return n!=0&&n!=5&&n!=1&&n!=2&&n!=3&&n!=4?(t.j=!0,!1):(t.i=e,t.l=e>>>3,t.h=n,!0)}function tt(t){switch(t.h){case 0:if(t.h!=0)tt(t);else{for(t=t.g;t.h[t.g]&128;)t.g++;t.g++}break;case 1:t.h!=1?tt(t):(t=t.g,t.g+=8);break;case 2:if(t.h!=2)tt(t);else{var e=st(t.g);t=t.g,t.g+=e}break;case 5:t.h!=5?tt(t):(t=t.g,t.g+=4);break;case 3:e=t.l;do{if(!K(t)){t.j=!0;break}if(t.h==4){t.l!=e&&(t.j=!0);break}tt(t)}while(1);break;default:t.j=!0}}function zt(t,e,n){var r=t.g.i,i=st(t.g);return i=t.g.g+i,t.g.i=i,n(e,t),t.g.g=i,t.g.i=r,e}function Zt(t){var e=st(t.g);t=t.g;var n=t.g;t.g+=e,t=t.h;var r;if(xe)(r=Vt)||(r=Vt=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(t.subarray(n,n+e));else{e=n+e;for(var i=[],u=null,o,s,a;n<e;)o=t[n++],128>o?i.push(o):224>o?n>=e?i.push(65533):(s=t[n++],194>o||(s&192)!==128?(n--,i.push(65533)):i.push((o&31)<<6|s&63)):240>o?n>=e-1?i.push(65533):(s=t[n++],(s&192)!==128||o===224&&160>s||o===237&&160<=s||((r=t[n++])&192)!==128?(n--,i.push(65533)):i.push((o&15)<<12|(s&63)<<6|r&63)):244>=o?n>=e-2?i.push(65533):(s=t[n++],(s&192)!==128||(o<<28)+(s-144)>>30!==0||((r=t[n++])&192)!==128||((a=t[n++])&192)!==128?(n--,i.push(65533)):(o=(o&7)<<18|(s&63)<<12|(r&63)<<6|a&63,o-=65536,i.push((o>>10&1023)+55296,(o&1023)+56320))):i.push(65533),8192<=i.length&&(u=Bt(u,i),i.length=0);r=Bt(u,i)}return r}function xt(){this.h=[],this.i=0,this.g=new dt}function et(t,e){e.length!==0&&(t.h.push(e),t.i+=e.length)}function Tt(t){var e=t.i+t.g.length();if(e===0)return new Uint8Array(0);e=new Uint8Array(e);for(var n=t.h,r=n.length,i=0,u=0;u<r;u++){var o=n[u];o.length!==0&&(e.set(o,i),i+=o.length)}return n=t.g,r=n.h,r!==0&&(e.set(n.g.subarray(0,r),i),n.h=0),t.h=[e],e}function q(t,e,n){if(n!=null){G(t.g,8*e+5),t=t.g;var r=n;r=(n=0>r?1:0)?-r:r,r===0?0<1/r?Y=J=0:(J=0,Y=2147483648):isNaN(r)?(J=0,Y=2147483647):34028234663852886e22<r?(J=0,Y=(n<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),J=0,Y=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),r=Math.round(8388608*r)&8388607,J=0,Y=(n<<31|e+127<<23|r)>>>0),n=Y,t.push(n>>>0&255),t.push(n>>>8&255),t.push(n>>>16&255),t.push(n>>>24&255)}}var Me=typeof Uint8Array=="function";function Kt(t,e,n){if(t!=null)return typeof t=="object"?Me&&t instanceof Uint8Array?n(t):te(t,e,n):e(t)}function te(t,e,n){if(Array.isArray(t)){for(var r=Array(t.length),i=0;i<t.length;i++)r[i]=Kt(t[i],e,n);return Array.isArray(t)&&t.W&&ut(r),r}r={};for(i in t)r[i]=Kt(t[i],e,n);return r}function Ue(t){return typeof t=="number"?isFinite(t)?t:String(t):t}var Fe={W:{value:!0,configurable:!0}};function ut(t){return Array.isArray(t)&&!Object.isFrozen(t)&&Object.defineProperties(t,Fe),t}var ee;function W(t,e,n){var r=ee;ee=null,t||(t=r),r=this.constructor.ca,t||(t=r?[r]:[]),this.j=r?0:-1,this.i=null,this.g=t;t:{if(r=this.g.length,t=r-1,r&&(r=this.g[t],r!==null&&typeof r=="object"&&r.constructor===Object)){this.l=t-this.j,this.h=r;break t}e!==void 0&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(n)for(e=0;e<n.length;e++)t=n[e],t<this.l?(t+=this.j,(r=this.g[t])?ut(r):this.g[t]=vt):(ne(this),(r=this.h[t])?ut(r):this.h[t]=vt)}var vt=Object.freeze(ut([]));function ne(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function R(t,e,n){return e===-1?null:(n===void 0?0:n)||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function re(t){var e=e===void 0?!1:e,n=R(t,1,e);return n==null&&(n=vt),n===vt&&(n=ut([]),S(t,1,n,e)),n}function X(t,e,n){return t=R(t,e),t=t==null?t:+t,t==null?n===void 0?0:n:t}function S(t,e,n,r){(r===void 0?0:r)||e>=t.l?(ne(t),t.h[e]=n):t.g[e+t.j]=n}function Et(t,e){t.i||(t.i={});var n=t.i[1];if(!n){var r=re(t);n=[];for(var i=0;i<r.length;i++)n[i]=new e(r[i]);t.i[1]=n}return n}function ie(t,e,n,r){var i=Et(t,n);e=e||new n,t=re(t),r!=null?(i.splice(r,0,e),t.splice(r,0,nt(e))):(i.push(e),t.push(nt(e)))}W.prototype.toJSON=function(){var t=nt(this);return te(t,Ue,Ee)};function nt(t,e){if(t.i)for(var n in t.i){var r=t.i[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&nt(r[i]);else r&&nt(r)}return t.g}W.prototype.toString=function(){return nt(this).toString()};function oe(t,e){return t=R(t,e),t==null?0:t}function se(t,e){return t=R(t,e),t==null?"":t}function _t(t,e){if(t=t.m){et(e,e.g.end());for(var n=0;n<t.length;n++)et(e,t[n])}}function at(t,e){if(e.h==4)return!1;var n=e.m;return tt(e),e.N||(e=Yt(e.g.h,n,e.g.g),(n=t.m)?n.push(e):t.m=[e]),!0}function I(t,e){var n=void 0;return new(n||(n=Promise))(function(r,i){function u(a){try{s(e.next(a))}catch(l){i(l)}}function o(a){try{s(e.throw(a))}catch(l){i(l)}}function s(a){a.done?r(a.value):new n(function(l){l(a.value)}).then(u,o)}s((e=e.apply(t,void 0)).next())})}function lt(t){W.call(this,t)}rt(lt,W);function Le(t,e){for(;K(e);)switch(e.i){case 8:var n=st(e.g);S(t,1,n);break;case 21:n=H(e.g),S(t,2,n);break;case 26:n=Zt(e),S(t,3,n);break;case 34:n=Zt(e),S(t,4,n);break;default:if(!at(t,e))return t}return t}function Rt(t){W.call(this,t,-1,Ne)}rt(Rt,W),Rt.prototype.addClassification=function(t,e){ie(this,t,lt,e)};var Ne=[1];function ct(t){W.call(this,t)}rt(ct,W);function Ce(t,e){for(;K(e);)switch(e.i){case 13:var n=H(e.g);S(t,1,n);break;case 21:n=H(e.g),S(t,2,n);break;case 29:n=H(e.g),S(t,3,n);break;case 37:n=H(e.g),S(t,4,n);break;case 45:n=H(e.g),S(t,5,n);break;default:if(!at(t,e))return t}return t}function ue(t){W.call(this,t,-1,Ie)}rt(ue,W);var Ie=[1];function Pt(t){W.call(this,t)}rt(Pt,W);function ae(t,e,n){if(n=t.createShader(n===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(n));return n}function De(t){return Et(t,lt).map(function(e){return{index:oe(e,1),Y:X(e,2),label:R(e,3)!=null?se(e,3):void 0,displayName:R(e,4)!=null?se(e,4):void 0}})}function Be(t){return{x:X(t,1),y:X(t,2),z:X(t,3),visibility:R(t,4)!=null?X(t,4):void 0}}function Mt(t,e){this.h=t,this.g=e,this.l=0}function le(t,e,n){return Ve(t,e),typeof t.g.canvas.transferToImageBitmap=="function"?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.g.canvas):(t.i===void 0&&(t.i=document.createElement("canvas")),new Promise(function(r){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),r(t.i)}))}function Ve(t,e){var n=t.g;if(t.m===void 0){var r=ae(n,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=ae(n,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),u=n.createProgram();if(n.attachShader(u,r),n.attachShader(u,i),n.linkProgram(u),!n.getProgramParameter(u,n.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+n.getProgramInfoLog(u));r=t.m=u,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}function We(t){this.g=t}var He=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function qe(t,e){return e+t}function ce(t,e){window[t]=e}function Xe(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(n){e.addEventListener("load",function(){n()},!1),e.addEventListener("error",function(){n()},!1),document.body.appendChild(e)})}function $e(){return I(this,function t(){return C(t,function(e){switch(e.g){case 1:return e.m=2,M(e,WebAssembly.instantiate(He),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}function Ut(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||qe,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=e,t.options){e=U(Object.keys(t.options));for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;r!==void 0&&(this.j[n]=typeof r=="function"?r():r)}}}y=Ut.prototype,y.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ye(t,e){return t.g.files===void 0?[]:typeof t.g.files=="function"?t.g.files(e):t.g.files}function Je(t){return I(t,function e(){var n=this,r,i,u,o,s,a,l,h,k,w,d;return C(e,function(c){switch(c.g){case 1:return r=n,n.R?(i=Ye(n,n.j),M(c,$e(),2)):c.return();case 2:if(u=c.h,typeof window=="object")return ce("createMediapipeSolutionsWasm",{locateFile:n.locateFile}),ce("createMediapipeSolutionsPackedAssets",{locateFile:n.locateFile}),a=i.filter(function(g){return g.data!==void 0}),l=i.filter(function(g){return g.data===void 0}),h=Promise.all(a.map(function(g){var m=yt(r,g.url);if(g.path!==void 0){var b=g.path;m=m.then(function(L){return r.overrideFile(b,L),Promise.resolve(L)})}return m})),k=Promise.all(l.map(function(g){return g.simd===void 0||g.simd&&u||!g.simd&&!u?Xe(r.locateFile(g.url,r.S)):Promise.resolve()})).then(function(){return I(r,function g(){var m,b,L=this;return C(g,function(x){if(x.g==1)return m=window.createMediapipeSolutionsWasm,b=window.createMediapipeSolutionsPackedAssets,M(x,m(b),2);L.h=x.h,x.g=0})})}),w=function(){return I(r,function g(){var m=this;return C(g,function(b){return m.g.graph&&m.g.graph.url?b=M(b,yt(m,m.g.graph.url),0):(b.g=0,b=void 0),b})})}(),M(c,Promise.all([k,h,w]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return o=i.filter(function(g){return g.simd===void 0||g.simd&&u||!g.simd&&!u}).map(function(g){return r.locateFile(g.url,r.S)}),importScripts.apply(null,ft(o)),M(c,createMediapipeSolutionsWasm(Module),6);case 6:n.h=c.h,n.l=new OffscreenCanvas(1,1),n.h.canvas=n.l,s=n.h.GL.createContext(n.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),n.h.GL.makeContextCurrent(s),c.g=4;break;case 7:if(n.l=document.createElement("canvas"),d=n.l.getContext("webgl2",{}),!d&&(d=n.l.getContext("webgl",{}),!d))return alert("Failed to create WebGL canvas context when passing video frame."),c.return();n.D=d,n.h.canvas=n.l,n.h.createContext(n.l,!0,!0,{});case 4:n.i=new n.h.SolutionWasm,n.R=!1,c.g=0}})})}function Ge(t){return I(t,function e(){var n=this,r,i,u,o,s,a,l,h;return C(e,function(k){if(k.g==1){if(n.g.graph&&n.g.graph.url&&n.P===n.g.graph.url)return k.return();if(n.o=!0,!n.g.graph||!n.g.graph.url){k.g=2;return}return n.P=n.g.graph.url,M(k,yt(n,n.g.graph.url),3)}for(k.g!=2&&(r=k.h,n.i.loadGraph(r)),i=U(Object.keys(n.B)),u=i.next();!u.done;u=i.next())o=u.value,n.i.overrideFile(o,n.B[o]);if(n.B={},n.g.listeners)for(s=U(n.g.listeners),a=s.next();!a.done;a=s.next())l=a.value,Ke(n,l);h=n.j,n.j={},n.setOptions(h),k.g=0})})}y.reset=function(){return I(this,function t(){var e=this;return C(t,function(n){e.i&&(e.i.reset(),e.m={},e.s={}),n.g=0})})},y.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],u={},o=U(Object.keys(t)),s=o.next();!s.done;u={K:u.K,L:u.L},s=o.next()){var a=s.value;a in this.j&&this.j[a]===t[a]||(this.j[a]=t[a],s=e[a],s!==void 0&&(s.onChange&&(u.K=s.onChange,u.L=t[a],r.push(function(l){return function(){return I(n,function h(){var k,w=this;return C(h,function(d){if(d.g==1)return M(d,l.K(l.L),2);k=d.h,k===!0&&(w.o=!0),d.g=0})})}}(u))),s.graphOptionXref&&(a={valueNumber:s.type===1?t[a]:0,valueBoolean:s.type===0?t[a]:!1,valueString:s.type===2?t[a]:""},s=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),s.graphOptionXref),a),i.push(s))))}(r.length!==0||i.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(i),this.u=(this.u===void 0?[]:this.u).concat(r))}};function Qe(t){return I(t,function e(){var n=this,r,i,u,o,s,a,l;return C(e,function(h){switch(h.g){case 1:if(!n.o)return h.return();if(!n.u){h.g=2;break}r=U(n.u),i=r.next();case 3:if(i.done){h.g=5;break}return u=i.value,M(h,u(),4);case 4:i=r.next(),h.g=3;break;case 5:n.u=void 0;case 2:if(n.A){for(o=new n.h.GraphOptionChangeRequestList,s=U(n.A),a=s.next();!a.done;a=s.next())l=a.value,o.push_back(l);n.i.changeOptions(o),o.delete(),n.A=void 0}n.o=!1,h.g=0}})})}y.initialize=function(){return I(this,function t(){var e=this;return C(t,function(n){return n.g==1?M(n,Je(e),2):n.g!=3?M(n,Ge(e),3):M(n,Qe(e),0)})})};function yt(t,e){return I(t,function n(){var r=this,i,u;return C(n,function(o){return e in r.F?o.return(r.F[e]):(i=r.locateFile(e,""),u=fetch(i).then(function(s){return s.arrayBuffer()}),r.F[e]=u,o.return(u))})})}y.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},y.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},y.send=function(t,e){return I(this,function n(){var r=this,i,u,o,s,a,l,h,k,w;return C(n,function(d){switch(d.g){case 1:return r.g.inputs?(i=1e3*(e==null?performance.now():e),M(d,r.C,2)):d.return();case 2:return M(d,r.initialize(),3);case 3:for(u=new r.h.PacketDataList,o=U(Object.keys(t)),s=o.next();!s.done;s=o.next())if(a=s.value,l=r.g.inputs[a]){t:{var c=r,g=t[a];switch(l.type){case"video":var m=c.m[l.stream];if(m||(m=new Mt(c.h,c.D),c.m[l.stream]=m),c=m,c.l===0&&(c.l=c.h.createTexture()),typeof HTMLVideoElement<"u"&&g instanceof HTMLVideoElement){var b=g.videoWidth;m=g.videoHeight}else typeof HTMLImageElement<"u"&&g instanceof HTMLImageElement?(b=g.naturalWidth,m=g.naturalHeight):(b=g.width,m=g.height);m={glName:c.l,width:b,height:m},b=c.g,b.canvas.width=m.width,b.canvas.height=m.height,b.activeTexture(b.TEXTURE0),c.h.bindTexture2d(c.l),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,g),c.h.bindTexture2d(0),c=m;break t;case"detections":for(m=c.m[l.stream],m||(m=new We(c.h),c.m[l.stream]=m),c=m,c.data||(c.data=new c.g.DetectionListData),c.data.reset(g.length),m=0;m<g.length;++m){b=g[m];var L=c.data,x=L.setBoundingBox,D=m,P=b.T,v=new Pt;S(v,1,P.Z),S(v,2,P.$),S(v,3,P.height),S(v,4,P.width),S(v,5,P.rotation),S(v,6,P.X);var j=P=new xt;q(j,1,R(v,1)),q(j,2,R(v,2)),q(j,3,R(v,3)),q(j,4,R(v,4)),q(j,5,R(v,5));var O=R(v,6);if(O!=null&&O!=null){G(j.g,48);var p=j.g,A=O;O=0>A,A=Math.abs(A);var f=A>>>0;for(A=Math.floor((A-f)/4294967296),A>>>=0,O&&(A=~A>>>0,f=(~f>>>0)+1,4294967295<f&&(f=0,A++,4294967295<A&&(A=0))),Y=f,J=A,O=Y,f=J;0<f||127<O;)p.push(O&127|128),O=(O>>>7|f<<25)>>>0,f>>>=7;p.push(O)}if(_t(v,j),P=Tt(P),x.call(L,D,P),b.O)for(L=0;L<b.O.length;++L)v=b.O[L],j=!!v.visibility,x=c.data,D=x.addNormalizedLandmark,P=m,v=Object.assign(Object.assign({},v),{visibility:j?v.visibility:0}),j=new ct,S(j,1,v.x),S(j,2,v.y),S(j,3,v.z),v.visibility&&S(j,4,v.visibility),p=v=new xt,q(p,1,R(j,1)),q(p,2,R(j,2)),q(p,3,R(j,3)),q(p,4,R(j,4)),q(p,5,R(j,5)),_t(j,p),v=Tt(v),D.call(x,P,v);if(b.M)for(L=0;L<b.M.length;++L){if(x=c.data,D=x.addClassification,P=m,v=b.M[L],j=new lt,S(j,2,v.Y),v.index&&S(j,1,v.index),v.label&&S(j,3,v.label),v.displayName&&S(j,4,v.displayName),p=v=new xt,f=R(j,1),f!=null&&f!=null)if(G(p.g,8),O=p.g,0<=f)G(O,f);else{for(A=0;9>A;A++)O.push(f&127|128),f>>=7;O.push(1)}q(p,2,R(j,2)),O=R(j,3),O!=null&&(O=Ht(O),G(p.g,26),G(p.g,O.length),et(p,p.g.end()),et(p,O)),O=R(j,4),O!=null&&(O=Ht(O),G(p.g,34),G(p.g,O.length),et(p,p.g.end()),et(p,O)),_t(j,p),v=Tt(v),D.call(x,P,v)}}c=c.data;break t;default:c={}}}switch(h=c,k=l.stream,l.type){case"video":u.pushTexture2d(Object.assign(Object.assign({},h),{stream:k,timestamp:i}));break;case"detections":w=h,w.stream=k,w.timestamp=i,u.pushDetectionList(w);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return r.i.send(u),M(d,r.C,4);case 4:u.delete(),d.g=0}})})};function ze(t,e,n){return I(t,function r(){var i,u,o,s,a,l,h=this,k,w,d,c,g,m,b,L;return C(r,function(x){switch(x.g){case 1:if(!n)return x.return(e);for(i={},u=0,o=U(Object.keys(n)),s=o.next();!s.done;s=o.next())a=s.value,l=n[a],typeof l!="string"&&l.type==="texture"&&e[l.stream]!==void 0&&++u;1<u&&(h.G=!1),k=U(Object.keys(n)),s=k.next();case 2:if(s.done){x.g=4;break}if(w=s.value,d=n[w],typeof d=="string")return b=i,L=w,M(x,Ze(h,w,e[d]),14);if(c=e[d.stream],d.type==="detection_list"){if(c){for(var D=c.getRectList(),P=c.getLandmarksList(),v=c.getClassificationsList(),j=[],O=0;O<D.size();++O){var p=D.get(O);t:{var A=new Pt;for(p=new pt(p);K(p);)switch(p.i){case 13:var f=H(p.g);S(A,1,f);break;case 21:f=H(p.g),S(A,2,f);break;case 29:f=H(p.g),S(A,3,f);break;case 37:f=H(p.g),S(A,4,f);break;case 45:f=H(p.g),S(A,5,f);break;case 48:for(var E=p.g,F=128,Ft=0,z=f=0;4>z&&128<=F;z++)F=E.h[E.g++],Ft|=(F&127)<<7*z;if(128<=F&&(F=E.h[E.g++],Ft|=(F&127)<<28,f|=(F&127)>>4),128<=F)for(z=0;5>z&&128<=F;z++)F=E.h[E.g++],f|=(F&127)<<7*z+3;128>F?(E=Ft>>>0,F=f>>>0,(f=F&2147483648)&&(E=~E+1>>>0,F=~F>>>0,E==0&&(F=F+1>>>0)),E=4294967296*F+(E>>>0),f=f?-E:E):(E.l=!0,f=void 0),S(A,6,f);break;default:if(!at(A,p))break t}}A={Z:X(A,1),$:X(A,2),height:X(A,3),width:X(A,4),rotation:X(A,5,0),X:oe(A,6)},f=P.get(O);t:for(p=new ue,f=new pt(f);K(f);)switch(f.i){case 10:E=zt(f,new ct,Ce),ie(p,E,ct,void 0);break;default:if(!at(p,f))break t}p=Et(p,ct).map(Be),E=v.get(O);t:for(f=new Rt,E=new pt(E);K(E);)switch(E.i){case 10:f.addClassification(zt(E,new lt,Le));break;default:if(!at(f,E))break t}A={T:A,O:p,M:De(f)},j.push(A)}D=j}else D=[];i[w]=D,x.g=7;break}if(d.type==="proto_list"){if(c){for(D=Array(c.size()),P=0;P<c.size();P++)D[P]=c.get(P);c.delete()}else D=[];i[w]=D,x.g=7;break}if(c===void 0){x.g=3;break}if(d.type==="float_list"){i[w]=c,x.g=7;break}if(d.type==="proto"){i[w]=c,x.g=7;break}if(d.type!=="texture")throw Error("Unknown output config type: '"+d.type+"'");return g=h.s[w],g||(g=new Mt(h.h,h.D),h.s[w]=g),M(x,le(g,c,h.G),13);case 13:m=x.h,i[w]=m;case 7:d.transform&&i[w]&&(i[w]=d.transform(i[w])),x.g=3;break;case 14:b[L]=x.h;case 3:s=k.next(),x.g=2;break;case 4:return x.return(i)}})})}function Ze(t,e,n){return I(t,function r(){var i=this,u;return C(r,function(o){return typeof n=="number"||n instanceof Uint8Array||n instanceof i.h.Uint8BlobList?o.return(n):n instanceof i.h.Texture2dDataOut?(u=i.s[e],u||(u=new Mt(i.h,i.D),i.s[e]=u),o.return(le(u,n,i.G))):o.return(void 0)})})}function Ke(t,e){for(var n=e.name||"$",r=[].concat(ft(e.wants)),i=new t.h.StringList,u=U(e.wants),o=u.next();!o.done;o=u.next())i.push_back(o.value);u=t.h.PacketListener.implement({onResults:function(s){for(var a={},l=0;l<e.wants.length;++l)a[r[l]]=s.get(l);var h=t.listeners[n];h&&(t.C=ze(t,a,e.outs).then(function(k){k=h(k);for(var w=0;w<e.wants.length;++w){var d=a[r[w]];typeof d=="object"&&d.hasOwnProperty&&d.hasOwnProperty("delete")&&d.delete()}k&&(t.C=k)}))}}),t.i.attachMultiListener(i,u),i.delete()}y.onResults=function(t,e){this.listeners[e||"$"]=t},gt("Solution",Ut),gt("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function fe(t){switch(t===void 0&&(t=0),t){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function he(t){var e=this;t=t||{},this.g=new Ut({locateFile:t.locateFile,files:function(n){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:fe(n.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(n){return I(e,function r(){var i,u,o=this,s;return C(r,function(a){return a.g==1?(i=fe(n),u="third_party/mediapipe/modules/selfie_segmentation/"+i,M(a,yt(o.g,i),2)):(s=a.h,o.g.overrideFile(u,s),a.return(!0))})})}}}})}y=he.prototype,y.close=function(){return this.g.close(),Promise.resolve()},y.onResults=function(t){this.g.onResults(t)},y.initialize=function(){return I(this,function t(){var e=this;return C(t,function(n){return M(n,e.g.initialize(),0)})})},y.reset=function(){this.g.reset()},y.send=function(t){return I(this,function e(){var n=this;return C(e,function(r){return M(r,n.g.send(t),0)})})},y.setOptions=function(t){this.g.setOptions(t)},gt("SelfieSegmentation",he),gt("VERSION","0.1.1632777926")}).call(Lt);const nn="/assets/tainan.a00b827a.jpeg",rn="/assets/taipei.ee811b4e.jpeg",on="/assets/japan.bbd1aad5.jpeg",sn="/assets/egypt.e7502e30.webp",Nt=[{url:nn,alt:"tainan"},{url:rn,alt:"taipei"},{url:on,alt:"japan"},{url:sn,alt:"egypt"}];let ge=null,de=null,mt=null,wt=new Image,V=null,$=null;const Ct=new en.SelfieSegmentation({locateFile:y=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${y}`});Ct.setOptions({modelSelection:1});Ct.onResults(yn);const pe=document.querySelector(".localVideo"),un=document.querySelector(".turnCameraOnButton"),an=document.querySelector(".turnCameraOffButton"),ln=document.querySelector(".removeBackgroundButton"),ve=document.querySelector(".sectionCustomImages"),It=document.querySelector(".uploadInput");cn();function cn(){ve.innerHTML=hn(Nt),fn()}function fn(){un.addEventListener("click",gn),ln.addEventListener("click",pn),an.addEventListener("click",dn);const[...y]=ve.querySelectorAll(".customImage");y.map((N,B)=>N.addEventListener("click",ye(Nt[B].url))),It.addEventListener("change",mn)}function hn(y){return y.reduce((N,B)=>N+`<div class="customImage">
        <img
          src="${B.url}"
          alt="${B.alt}"
        />
      </div>`,"")}async function gn(){try{mt=await navigator.mediaDevices.getUserMedia({video:!0}),pe.srcObject=mt}catch(y){y.name==="NotAllowedError"||y.name==="PermissionDeniedError"?alert("Permission denied error"):alert("error")}}function dn(){mt.getVideoTracks().map(y=>y.stop()),It.disabled=!0}async function pn(){const y=await vn();pe.srcObject=y,It.disabled=!1}function ye(y){return()=>{wt.src=y,$.drawImage(wt,0,0,V.width,V.height)}}async function vn(){const y=mt.getVideoTracks()[0],N=new MediaStreamTrackProcessor({track:y}),B=new MediaStreamTrackGenerator({kind:"video"});wt.src=Nt[0].url;const{width:Q,height:T}=y.getSettings();V=new OffscreenCanvas(Q,T),$=V.getContext("2d");const _=new TransformStream({async transform(U,ft){ge=ft,de=U.timestamp,U.width=Q,U.height=T,await Ct.send({image:U}),U.close(),console.log("transform")}});return N.readable.pipeThrough(_).pipeTo(B.writable),new MediaStream([B])}function yn(y){$.save(),$.clearRect(0,0,V.width,V.height),$.drawImage(y.segmentationMask,0,0,V.width,V.height),$.globalCompositeOperation="source-out",$.drawImage(wt,0,0,V.width,V.height),$.globalCompositeOperation="destination-atop",$.drawImage(y.image,0,0,V.width,V.height),$.restore(),ge.enqueue(new VideoFrame(V,{timestamp:de,alpha:"discard"}))}function mn(y){const N=new FileReader;N.readAsDataURL(y.target.files[0]),N.onload=()=>{ye(N.result)()}}
